<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <title>HELLO TITLE</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js"
            integrity="sha256-iaFenEC8axSAnyNu6M0+0epCOTwfbKVceFXNd5s/ki4="
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/prism.min.js"></script>
    <script type="text/javascript">
        // screentime.js minified:
!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&module.exports?module.exports=i(require("jquery")):i(jQuery)}(function(p){var v={fields:[],percentOnScreen:"50%",reportInterval:10,googleAnalytics:!1,callback:function(){}};p.screentime=function(c){(c=p.extend({},v,c)).percentOnScreen=parseInt(c.percentOnScreen.replace("%",""),10);var o,h,l={},n={},a={},i=null,t=!1;function s(i){this.selector=i.selector,$elem=this.$elem=p(i.selector),this.name=i.name,this.top=$elem.offset().top,this.height=$elem.height(),this.bottom=this.top+this.height,this.width=$elem.width()}function e(){var i=p(window);this.top=i.scrollTop(),this.height=i.height(),this.bottom=this.top+this.height,this.width=i.width()}function r(){var o=new e;p.each(n,function(i,t){var e,n,s;e=o,((n=t).bottom<=e.bottom&&n.top>=e.top||n.height>e.height&&e.bottom-n.top>e.height/2&&n.bottom-e.top>e.height/2||(s=n.height*(c.percentOnScreen/100),e.bottom-s>=n.top&&n.bottom-s>e.top))&&(a[i]+=1,l[i]+=1)})}function f(){var s={};p.each(l,function(i,t){var e,n;0<t&&(s[i]=t,l[i]=0,c.googleAnalytics&&(e=i,n=t,o&&ga("send","event","Screentime","Time on Screen",e,parseInt(n,10),{nonInteraction:!0}),h&&_gaq.push(["_trackEvent","Screentime","Time on Screen",e,parseInt(n,10),!0])))}),p.isEmptyObject(s)||c.callback.call(this,s,a)}function d(){t||(r(),t=!0),i=setInterval(function(){r()},1e3),reporter=setInterval(function(){f()},1e3*c.reportInterval)}function u(){clearInterval(i),clearInterval(reporter)}c.fields.length&&(c.googleAnalytics&&("function"==typeof ga&&(o=!0),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(h=!0)),function(){window.visibly={q:document,p:void 0,prefixes:["webkit","ms","o","moz","khtml"],props:["VisibilityState","visibilitychange","Hidden"],m:["focus","blur"],visibleCallbacks:[],hiddenCallbacks:[],genericCallbacks:[],_callbacks:[],cachedPrefix:"",fn:null,onVisible:function(i){"function"==typeof i&&this.visibleCallbacks.push(i)},onHidden:function(i){"function"==typeof i&&this.hiddenCallbacks.push(i)},getPrefix:function(){if(!this.cachedPrefix)for(var i=0;b=this.prefixes[i++];)if(b+this.props[2]in this.q)return this.cachedPrefix=b,this.cachedPrefix},visibilityState:function(){return this._getProp(0)},hidden:function(){return this._getProp(2)},visibilitychange:function(i){"function"==typeof i&&this.genericCallbacks.push(i);var t=this.genericCallbacks.length;if(t)if(this.cachedPrefix)for(;t--;)this.genericCallbacks[t].call(this,this.visibilityState());else for(;t--;)this.genericCallbacks[t].call(this,i)},isSupported:function(i){return this.cachedPrefix+this.props[2]in this.q},_getProp:function(i){return this.q[this.cachedPrefix+this.props[i]]},_execute:function(i){if(i){this._callbacks=1==i?this.visibleCallbacks:this.hiddenCallbacks;for(var t=this._callbacks.length;t--;)this._callbacks[t]()}},_visible:function(){window.visibly._execute(1),window.visibly.visibilitychange.call(window.visibly,"visible")},_hidden:function(){window.visibly._execute(2),window.visibly.visibilitychange.call(window.visibly,"hidden")},_nativeSwitch:function(){this[this._getProp(2)?"_hidden":"_visible"]()},_listen:function(){try{this.isSupported()?this.q.addEventListener(this.cachedPrefix+this.props[1],function(){window.visibly._nativeSwitch.apply(window.visibly,arguments)},1):this.q.addEventListener?(window.addEventListener(this.m[0],this._visible,1),window.addEventListener(this.m[1],this._hidden,1)):this.q.attachEvent&&(this.q.attachEvent("onfocusin",this._visible),this.q.attachEvent("onfocusout",this._hidden))}catch(i){}},init:function(){this.getPrefix(),this._listen()}},this.visibly.init()}(),p.screentime.reset=function(){u(),p.each(n,function(i,t){a[i]=0,l[i]=0}),d()},p.each(c.fields,function(i,t){if(p(t.selector).length){var e=new s(t);n[e.name]=e,l[e.name]=0,a[e.name]=0}}),d(),visibly.onHidden(function(){u()}),visibly.onVisible(function(){u(),d()}))}});
    </script>

    <script type="text/javascript">
        // https://app.segment.com/improbable-dev/sources/james_taine_webdemo/overview
        //
        // Data ends up in: https://bigquery.cloud.google.com/dataset/ci-io-platform-dev:james_taine_webdemo
        // It takes 1hr to appear
        // Use the segment.com debugger to see "live" data: https://app.segment.com/improbable-dev/sources/james_taine_webdemo/debugger

        // https://segment.com/docs/sources/website/analytics.js/quickstart/
        !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";
        analytics.load("e9wxdkLyaDMjPb50EcobEl76FeC18iGL");
        analytics.page();
        }}();
    </script>

    <script>
        // https://gist.github.com/magician11/5914ae687e8494f5b4718263eef7003e
		// https://www.google.com/?bob=john&id=123 --> Object {bob: "john", id: "123"}
        const getURLparams = () => {
          const pl = /\+/g;
          const search = /([^&=]+)=?([^&]*)/g;
          const decode = s => decodeURIComponent(s.replace(pl, ' '));
          const query = window.location.search.substring(1);

          const urlParams = {};
          let match;
          while ((match = search.exec(query))) {
            urlParams[decode(match[1])] = decode(match[2]);
          }

          return urlParams;
        };
    </script>
</head>
<body>
<div id="console">
    <ul>
        <li data-time="0" data-field="Top">Intro: <span>0</span>s</li>
        <li data-time="0" data-field="Middle">Main: <span>0</span>s</li>
        <li data-time="0" data-field="Bottom">Bottom: <span>0</span>s</li>
    </ul>
</div>

<div class="wrap">
    <div id="content">

        <div id="top">
            <span style="font-weight:400;">SpatialOS is a managed cloud service to host any synchronous multiplayer game. It is specifically designed to operate online games with new gameplay and enable developers to iterate quickly to find new gameplay that is fun.</p>
        </div>

        <div id="middle">
			<span style="font-weight:400;">The essential and core service SpatialOS provides is server hosting, and facilitating the connection of players to the game so they can play it. This is a globally hosted scalable infrastructure with regions close to all major game playing populations, enabling low latency gameplay for players of SpatialOS games. This is fully managed by Improbable so that the developer no longer needs to worry about server management. Because of this, it is easier for teams of all sizes to create online games. SpatialOS can be hosted on all major public cloud providers.</p>

			<span style="font-weight:400;">The SpatialOS Runtime is the foundational system for the service -- it makes it possible for these games to exceed the limitations of a single game engine or server, by distributing the game logic and game data across multiple servers. This enables larger seamless worlds with more complex game objects, more detailed/complex AI, additional gameplay systems and higher fidelity gameplay at scale. It also provides an in-memory database that allows all objects in the world to be fully persistent. Finally it replaces a game engines networking and interest management system to allow for more players and denser gameplay scenarios, although it does not replace the game logic. These elements can be mixed arbitrarily without tradeoffs.</p>

			<span style="font-weight:400;">SpatialOS also has features that enable developers to explore new gameplay quickly. To do this we provide three major elements:</p>
			<ul>
				<li style="font-weight:400;"><span style="font-weight:400;">Out of the box tooling: Tooling that comes with SpatialOS to help developers understand what is happening in their game world. These include a distributed metrics service, logging service)</span></li>
				<li style="font-weight:400;"><span style="font-weight:400;">Service to efficiently test your game: An automated player testing service and a light-weight distribution service and the ability to deploy globally rapidly (including to China).</span></li>
				<li style="font-weight:400;"><span style="font-weight:400;">A set of services which developers can extend to integrate/create their own workflows (i.e build systems) and integrate their own 3rd party services (e.g matchmaking, player auth etc).</span></li>
			</ul>
        </div>

        <div id="bottom">
            <span style="font-weight:400;">Users write the logic for their game using a game engine, or in C, C++, C# or Java languages, and must integrate these applications with SpatialOS using the SpatialOS SDK. Developers also use the SDK to adapt their workflows and integrate other 3rd party services. The SDKs support all major platforms (PC,Xbox, Playstation, Mobile), and players on these different platforms can interact in the same game world. For the most part this allows users to develop games in the way they are familiar, however they will need to adhere to the SpatialOS programming paradigm and learn some basic distributed systems knowledge. We also provide first party native integrations for Unity and Unreal.</span><code></code>
        </div>

    </div>

</div>

<script>
    // one time segment.com identify, pull values from querystring
    const params = getURLparams();
    if('id' in params)
        // https://segment.com/docs/sources/website/analytics.js/#identify
        analytics.identify(params['id']);
    else
        //alert("No ID on query string -- be nice");  // do something better here, hide the form or something...

    // always track a segment.com page() hit, analytics.js will handle anonymous AND identified users here
    // https://segment.com/docs/sources/website/analytics.js/#page
    analytics.page('Page start');

    $.screentime({
        fields: [
            {
                selector: '#top',
                name: 'Top'
            },
            {
                selector: '#middle',
                name: 'Middle'
            },
            {
                selector: '#bottom',
                name: 'Bottom'
            }
        ],	
        reportInterval: 1,
        callback: function (data) {
            // every tick, send segment some data of what they were looking at
            // the segment analytics library will deal with the identity.
            // https://segment.com/docs/sources/website/analytics.js/#track
            analytics.track('ScreenTime', data);
            console.log(data);  // TODO: remove me

            // update the screen - TODO: remove me
            $.each(data, function (key, val) {
                var $elem = $('#console li[data-field="' + key + '"]');
                var current = parseInt($elem.data('time'), 10);

                $elem.data('time', current + val);
                $elem.find('span').html(current += val);
            });
        }
    });
</script>

<script>
	window.onbeforeunload = function () {
		analytics.page('Page closed')
	};
</script>

</body>
</html>